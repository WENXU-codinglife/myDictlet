<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLASHCARD</title>
</head>
<body onload="ini_page()">
    <h1 id = "headone">TEXT</h1>

    <div id = "box"></div>



		<!-- Scripts -->
        <script src="../assets/js/jquery.min.js"></script>
        <script src="../assets/js/skel.min.js"></script>
        <script src="../assets/js/util.js"></script>
        <script src="../assets/js/main.js"></script>

        <script>

            function ini_page(){
                var loc = window.location.href;
                console.log(loc);
                $(document).ready(function() {
                    var qurl="/fetchwords";
                    $.ajax({
                        type: "POST",
                        cache: false,
                        data:{keyword:loc},
                        url: qurl,
                        dataType: "json",
                        //not understand what the codes are for
                        success: function(response) { 
                            //console.log(response); 
                            let num = response['number'];
                            console.log(num);
                            let htmlText = '';
                            for(let i = 0; i < num; i++){
                                console.log(response['words'][i]);
                                htmlText += '<div>' + response['words'][i] +
                                '<a onclick="myAudioFunction(\'' + response['words'][i] + '\');"> ' +
                                ' <img src = "../images/edifier.svg" style = "width = "15px"; height = "15px""> </img> </a>' +
                                '<button id = "' + response['words'][i] + '">Lookup</button>' + '</div>'
                            }
                            document.getElementById("box").innerHTML = htmlText;
                        },
                        error: function(response) {
                            console.log(error); 
                        }
                    })
                });
            }

            function myAudioFunction(rcs){
                rcs = 'https://media.merriam-webster.com/soundc11/e/extrap01.wav';
                let aAudio = new Audio(rcs);
                aAudio.play();
            }
        </script>
</body>
</html>